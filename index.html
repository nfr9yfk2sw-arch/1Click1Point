<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1Click1Point</title>
  <style>
    :root{
      --bg1:#ff4b1f; --bg2:#1fddff;
      --glass: rgba(0,0,0,0.55);
      --accent:#00c3ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font-family:Arial; color:white;}

    body{
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2),#24fe41,#ff0099);
      background-size:400% 400%;
      animation:grad 12s infinite;
      padding:20px;
    }
    @keyframes grad{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    .card{
      width:100%;
      max-width:430px;
      background:var(--glass);
      padding:20px;
      border-radius:16px;
      text-align:center;
      box-shadow:0 8px 30px rgba(0,0,0,0.4);
    }

    input{
      width:100%;
      padding:12px;
      margin:8px 0;
      border-radius:10px;
      border:0;
      font-size:16px;
      text-align:center;
    }

    h1{margin:10px 0 20px;}

    .link{color:var(--accent); text-decoration:underline; cursor:pointer;}

    button.smallbtn{
      padding:10px 18px;
      border-radius:10px;
      border:0;
      font-weight:600;
      cursor:pointer;
      background:var(--accent);
      margin-top:6px;
    }

    #mainPage{display:none;}

    /* BIG circle click button */
    .big-circle{
      width:210px; height:210px;
      border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-size:48px; font-weight:700;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.12), rgba(0,0,0,0.25));
      user-select:none;
      touch-action:manipulation;
      transition:transform 100ms;
      margin:12px auto;
    }
    .big-circle:active{transform:scale(1.08);}

    .leader-item{
      background:rgba(255,255,255,0.1);
      padding:8px;
      margin:4px 0;
      border-radius:8px;
      text-align:left;
    }
  </style>
</head>
<body>

<div class="card">

  <h1>1Click1Point</h1>

  <!-- START SCREEN -->
  <div id="startScreen">
    <button id="leaderBtn" class="smallbtn">Leaderboards</button>
    <br><br>
    <button id="goSignup" class="smallbtn">Sign Up</button>
    <button id="goLogin" class="smallbtn">Log In</button>
  </div>

  <!-- SIGNUP -->
  <form id="signupForm" style="display:none;">
    <h2>Create Account</h2>
    <input id="signupName" type="text" placeholder="Your name" required />
    <input id="signupEmail" type="email" placeholder="Email" required />
    <input id="signupPassword" type="password" placeholder="Password" required />
    <button type="submit" class="smallbtn">Sign Up</button>
    <p class="link" id="backStart1">Back</p>
  </form>

  <!-- LOGIN -->
  <form id="loginForm" style="display:none;">
    <h2>Log In</h2>
    <input id="loginEmail" type="email" placeholder="Email" required />
    <input id="loginPassword" type="password" placeholder="Password" required />
    <button type="submit" class="smallbtn">Log In</button>
    <p style="font-size:13px;opacity:.8;">Forgot password or email? <br><b>It cannot be reset.</b></p>
    <p class="link" id="backStart2">Back</p>
  </form>

  <!-- LEADERBOARD -->
  <div id="leaderboardPage" style="display:none;">
    <h2>Top 100 Touches</h2>
    <div id="leaderList"></div>
    <p class="link" id="backStart3">Back</p>
  </div>

  <!-- MAIN APP -->
  <div id="mainPage">
    <h2>Hello, <span id="userName"></span></h2>
    <div class="big-circle" id="bigCircle"><span id="clickCount">0</span></div>
    <button id="clickBtn" class="smallbtn">Click</button>
    <button id="resetBtn" class="smallbtn" style="background:#ff7272;">Reset</button>
    <br><br>
    <button id="logoutBtn" class="smallbtn" style="background:#9aa0ff;">Log Out</button>
  </div>

</div>

<script>
/* UTIL FUNCTIONS */
function norm(x){ return x.trim().toLowerCase(); }
function saveUser(email,obj){ localStorage.setItem("user_"+email,JSON.stringify(obj)); }
function loadUser(email){
  const d = localStorage.getItem("user_"+email);
  return d ? JSON.parse(d) : null;
}
function setCurrent(email){ localStorage.setItem("currentUser", email); }
function getCurrent(){ return localStorage.getItem("currentUser"); }
function clearCurrent(){ localStorage.removeItem("currentUser"); }

/* ELEMENTS */
const startScreen = document.getElementById("startScreen");
const signupForm = document.getElementById("signupForm");
const loginForm = document.getElementById("loginForm");
const leaderboardPage = document.getElementById("leaderboardPage");
const mainPage = document.getElementById("mainPage");

const signupName=document.getElementById("signupName");
const signupEmail=document.getElementById("signupEmail");
const signupPassword=document.getElementById("signupPassword");

const loginEmail=document.getElementById("loginEmail");
const loginPassword=document.getElementById("loginPassword");

const clickCountEl=document.getElementById("clickCount");
const userNameEl=document.getElementById("userName");
const bigCircle=document.getElementById("bigCircle");

/* NAVIGATION */
document.getElementById("goSignup").onclick=()=>{
  startScreen.style.display="none";
  signupForm.style.display="block";
};
document.getElementById("goLogin").onclick=()=>{
  startScreen.style.display="none";
  loginForm.style.display="block";
};
document.getElementById("backStart1").onclick=document.getElementById("backStart2").onclick=document.getElementById("backStart3").onclick=()=>{
  signupForm.style.display="none";
  loginForm.style.display="none";
  leaderboardPage.style.display="none";
  startScreen.style.display="block";
};

/* SIGNUP */
signupForm.onsubmit=(e)=>{
  e.preventDefault();
  const name=signupName.value.trim();
  const email=norm(signupEmail.value);
  const pass=signupPassword.value;

  if(loadUser(email)){ alert("Email already used."); return; }

  saveUser(email,{name:name,password:pass,clicks:0});
  alert("Account created!");
  signupForm.reset();

  signupForm.style.display="none";
  loginForm.style.display="block";
};

/* LOGIN */
loginForm.onsubmit=(e)=>{
  e.preventDefault();
  const email=norm(loginEmail.value);
  const pass=loginPassword.value;

  const user=loadUser(email);
  if(!user){ alert("Account not found."); return; }
  if(user.password !== pass){ alert("Incorrect password."); return; }

  setCurrent(email);
  openMain(user);
};

/* OPEN MAIN PAGE */
function openMain(user){
  startScreen.style.display="none";
  signupForm.style.display="none";
  loginForm.style.display="none";
  leaderboardPage.style.display="none";
  mainPage.style.display="block";

  userNameEl.textContent=user.name;
  clickCountEl.textContent=user.clicks;
}

/* CLICKING */
function addClick(){
  const email=getCurrent();
  if(!email) return;
  const user=loadUser(email);
  user.clicks++;
  saveUser(email,user);
  clickCountEl.textContent=user.clicks;
}
document.getElementById("clickBtn").onclick=addClick;
bigCircle.onclick=addClick;

/* RESET */
document.getElementById("resetBtn").onclick=()=>{
  if(!confirm("Reset your points to 0?")) return;
  const email=getCurrent();
  const user=loadUser(email);
  user.clicks=0;
  saveUser(email,user);
  clickCountEl.textContent=0;
};

/* LOG OUT */
document.getElementById("logoutBtn").onclick=()=>{
  clearCurrent();
  mainPage.style.display="none";
  startScreen.style.display="block";
};

/* LEADERBOARD */
document.getElementById("leaderBtn").onclick=()=>{
  startScreen.style.display="none";
  leaderboardPage.style.display="block";

  const list=document.getElementById("leaderList");
  list.innerHTML="";

  let all=[];
  for(let key in localStorage){
    if(key.startsWith("user_")){
      const u=JSON.parse(localStorage[key]);
      all.push({name:u.name,clicks:u.clicks});
    }
  }

  all.sort((a,b)=>b.clicks - a.clicks);
  const top100=all.slice(0,100);

  top100.forEach((u,i)=>{
    list.innerHTML += `
      <div class="leader-item">
        <b>#${i+1}</b> â€” ${u.name}  
        <span style="float:right;">${u.clicks}</span>
      </div>
    `;
  });

  if(top100.length===0){
    list.innerHTML="<p>No players yet.</p>";
  }
};

/* AUTO LOGIN */
window.onload=()=>{
  const current=getCurrent();
  if(current){
    const user=loadUser(current);
    if(user) openMain(user);
  }
};
</script>

</body>
</html>