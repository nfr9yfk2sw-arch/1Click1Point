<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1Click1Point</title>
  <style>
    :root{
      --bg1:#ff4b1f; --bg2:#1fddff; --accent:#00c3ff;
      --glass: rgba(0,0,0,0.55);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font-family:Inter, system-ui, Arial; -webkit-font-smoothing:antialiased;}
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg,var(--bg1),var(--bg2),#24fe41,#ff0099);
      background-size:400% 400%;
      animation:grad 12s linear infinite;
      color:white;
      padding:20px;
    }
    @keyframes grad{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    /* container for forms + app */
    .card{
      width:100%;
      max-width:420px;
      background:var(--glass);
      border-radius:16px;
      padding:18px;
      box-shadow:0 8px 30px rgba(0,0,0,0.4);
      text-align:center;
    }

    h1{margin:6px 0 12px; font-size:20px}
    input{
      width:100%;
      padding:12px;
      margin:8px 0;
      border-radius:10px;
      border:0;
      text-align:center;
      font-size:16px;
    }
    .small{font-size:13px; opacity:0.9}

    .link{color:var(--accent); text-decoration:underline; cursor:pointer}

    /* MAIN big circular button area */
    #mainPage { display:none; padding:10px; }
    .big-area { display:flex; flex-direction:column; gap:18px; align-items:center; justify-content:center; padding:10px 0; }
    .big-circle {
      width:210px; height:210px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.12), rgba(0,0,0,0.25));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:44px;
      color:white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 -6px 20px rgba(0,0,0,0.25);
      user-select:none;
      -webkit-user-select:none;
      touch-action: manipulation;
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    /* smaller on very small screens */
    @media (max-width:360px){
      .big-circle { width:170px; height:170px; font-size:36px; }
    }

    /* press feedback */
    .big-circle:active, .big-circle.pressed {
      transform: scale(1.08);
      box-shadow: 0 6px 18px rgba(0,0,0,0.45), inset 0 6px 12px rgba(255,255,255,0.05);
    }

    .btn-row{display:flex; gap:10px; justify-content:center; margin-top:6px}
    button.smallbtn{
      padding:8px 14px; border-radius:10px; border:0; background:var(--accent); color:#031016; font-weight:600; cursor:pointer;
    }

    .meta {opacity:0.95; font-size:14px}
  </style>
</head>
<body>
  <div class="card">
    <h1>1Click1Point</h1>

    <!-- Sign Up Form -->
    <form id="signupForm">
      <h2 class="small">Sign Up</h2>
      <input id="signupName" type="text" placeholder="Your name" required />
      <input id="signupEmail" type="email" placeholder="Your email" required />
      <button class="smallbtn" type="submit">Create account</button>
      <p class="small">Already have account? <span id="goLogin" class="link">Log in</span></p>
    </form>

    <!-- Login Form -->
    <form id="loginForm" style="display:none;">
      <h2 class="small">Log In</h2>
      <input id="loginEmail" type="email" placeholder="Your email" required />
      <button class="smallbtn" type="submit">Log in</button>
      <p class="small">No account? <span id="goSignup" class="link">Sign up</span></p>
    </form>

    <!-- Main App Page -->
    <div id="mainPage">
      <div class="big-area">
        <div id="userGreeting" class="meta">Hello <span id="userName">Friend</span></div>

        <!-- big circular touch button -->
        <div id="bigCircle" class="big-circle" role="button" aria-pressed="false" tabindex="0">
          <span id="clickCount">0</span>
        </div>

        <div class="btn-row">
          <button id="clickButton" class="smallbtn">Click</button>
          <button id="resetButton" class="smallbtn" style="background:#ff6b6b">Reset</button>
        </div>

        <div class="meta">Touch the big circle — the number inside is how many touches you made.</div>
        <div style="margin-top:8px;">
          <button id="logoutBtn" class="smallbtn" style="background:#9aa0ff">Log out</button>
        </div>
      </div>
    </div>
  </div>

<script>
  // Elements
  const signupForm = document.getElementById('signupForm');
  const loginForm = document.getElementById('loginForm');
  const mainPage = document.getElementById('mainPage');
  const goLogin = document.getElementById('goLogin');
  const goSignup = document.getElementById('goSignup');

  const signupName = document.getElementById('signupName');
  const signupEmail = document.getElementById('signupEmail');
  const loginEmail = document.getElementById('loginEmail');

  const bigCircle = document.getElementById('bigCircle');
  const clickButton = document.getElementById('clickButton');
  const resetButton = document.getElementById('resetButton');
  const clickCountEl = document.getElementById('clickCount');
  const userNameEl = document.getElementById('userName');
  const logoutBtn = document.getElementById('logoutBtn');

  // helpers
  function normalizeEmail(e){ return e.trim().toLowerCase(); }
  function saveUser(email, userObj){ localStorage.setItem(email, JSON.stringify(userObj)); }
  function loadUser(email){ const d = localStorage.getItem(email); return d ? JSON.parse(d) : null; }
  function setCurrent(email){ localStorage.setItem('currentUser', email); }
  function getCurrent(){ return localStorage.getItem('currentUser'); }
  function clearCurrent(){ localStorage.removeItem('currentUser'); }

  // navigation
  goLogin.addEventListener('click', ()=>{ signupForm.style.display='none'; loginForm.style.display='block'; });
  goSignup.addEventListener('click', ()=>{ loginForm.style.display='none'; signupForm.style.display='block'; });

  // Sign up
  signupForm.addEventListener('submit', e=>{
    e.preventDefault();
    const name = signupName.value.trim();
    const email = normalizeEmail(signupEmail.value);
    if(!name || !email){ alert('fill both fields'); return; }
    if(localStorage.getItem(email)){ alert('email already used — log in'); signupForm.reset(); goLogin.click(); return; }
    const user = { name, clicks: 0 };
    saveUser(email, user);
    alert('Account created! Log in now.');
    signupForm.reset();
    goLogin.click();
  });

  // Login
  loginForm.addEventListener('submit', e=>{
    e.preventDefault();
    const email = normalizeEmail(loginEmail.value);
    const user = loadUser(email);
    if(!user){ alert('No account found. Please sign up.'); return; }
    setCurrent(email);
    openMain(user);
    loginForm.reset();
  });

  // open main
  function openMain(user){
    signupForm.style.display='none';
    loginForm.style.display='none';
    mainPage.style.display='block';
    userNameEl.textContent = user.name || 'Friend';
    clickCountEl.textContent = user.clicks || 0;
  }

  // click logic shared for both big circle and small button
  function addClick(){
    const email = getCurrent();
    if(!email) return;
    const user = loadUser(email);
    user.clicks = (user.clicks || 0) + 1;
    saveUser(email, user);
    clickCountEl.textContent = user.clicks;
  }

  clickButton.addEventListener('click', addClick);

  // big circle touch behavior: support pointer/touch/click with press animation
  let pressTimeout = null;
  function pressStart(){
    bigCircle.classList.add('pressed');
    bigCircle.setAttribute('aria-pressed','true');
    // immediate click
    addClick();
  }
  function pressEnd(){
    bigCircle.classList.remove('pressed');
    bigCircle.setAttribute('aria-pressed','false');
    if(pressTimeout){ clearTimeout(pressTimeout); pressTimeout = null; }
  }

  // pointer events (works for mouse + touch)
  bigCircle.addEventListener('pointerdown', e=>{
    e.preventDefault();
    pressStart();
  });
  bigCircle.addEventListener('pointerup', pressEnd);
  bigCircle.addEventListener('pointercancel', pressEnd);
  bigCircle.addEventListener('pointerleave', pressEnd);

  // keyboard accessibility: space/enter to "press"
  bigCircle.addEventListener('keydown', e=>{
    if(e.key === ' ' || e.key === 'Enter'){ e.preventDefault(); pressStart(); setTimeout(pressEnd, 150); }
  });

  // reset button (resets count for current user)
  resetButton.addEventListener('click', ()=>{
    const email = getCurrent();
    if(!email) return alert('no user logged in');
    if(!confirm('Reset your count to 0?')) return;
    const user = loadUser(email);
    user.clicks = 0;
    saveUser(email, user);
    clickCountEl.textContent = 0;
  });

  // logout
  logoutBtn.addEventListener('click', ()=>{
    clearCurrent();
    mainPage.style.display='none';
    signupForm.style.display='block';
  });

  // auto-login if current user saved
  window.addEventListener('load', ()=>{
    const current = getCurrent();
    if(current){
      const user = loadUser(current);
      if(user) openMain(user);
      else clearCurrent();
    }
  });
</script>
</body>
</html>